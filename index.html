<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Yoti Onboarding – Registry Cross‑Check (Mock Demo)</title>
  <style>
    :root{
      --bg:#f8fafc;           /* light slate-50 */
      --card:#ffffff;         /* white */
      --ink:#0f172a;          /* slate-900 */
      --ink-dim:#475569;      /* slate-600 */
      --accent:#2D9FFF;  /* Yoti blue */       /* Yoti-like blue */
      --accent-ink:#ffffff;   
      --success:#059669;      /* green-600 */
      --warn:#d97706;         /* amber-600 */
      --err:#dc2626;          /* red-600 */
      --line:#e2e8f0;         /* slate-200 */
      --soft:#f1f5f9;         /* slate-100 */
      --shadow:0 12px 30px rgba(15,23,42,.08);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,"Noto Sans",Arial; color:var(--ink); background:var(--bg)}
    .wrap{max-width:880px;margin:0 auto;padding:20px}
    header{display:flex;align-items:center;gap:12px;justify-content:space-between}
    .brand{display:flex;align-items:center;gap:12px}
    .logo{width:40px;height:40px;border-radius:10px;display:grid;place-items:center;background:linear-gradient(160deg,#73a3ff,#1463ff);color:#fff;font-weight:800;box-shadow:0 8px 20px rgba(20,99,255,.3)}
    .brand h1{font-size:18px;margin:0}
    .subtitle{color:var(--ink-dim);font-size:13px;margin-top:2px}

    .topbar{margin-top:12px;background:var(--card);border:1px solid var(--line);border-radius:14px;padding:10px 12px;box-shadow:var(--shadow);display:flex;align-items:center;gap:10px;flex-wrap:wrap}
    .ticker{display:flex;gap:8px;flex-wrap:wrap}
    .step{display:inline-flex;align-items:center;gap:8px;padding:6px 10px;border-radius:999px;border:1px solid var(--line);background:var(--soft);font-size:12px;color:var(--ink-dim)}
    .step.ok{background:#ecfdf5;border-color:#bbf7d0;color:#065f46}
    .step.run{background:#eff6ff;border-color:#bfdbfe;color:#1e40af}
    .dot{width:10px;height:10px;border-radius:50%;background:var(--line)}
    .dot.run{background:#60a5fa}
    .dot.ok{background:#34d399}

    .card{background:var(--card);border:1px solid var(--line);border-radius:16px;padding:18px;box-shadow:var(--shadow)}
    h2{margin:0 0 10px 0;font-size:16px}
    label{display:block;font-size:13px;color:var(--ink-dim);margin-bottom:6px}
    input,select{width:100%;padding:12px;border-radius:12px;border:1px solid var(--line);background:#fff;color:var(--ink);outline:none;transition:box-shadow .2s,border-color .2s}
    input:focus,select:focus{border-color:var(--accent);box-shadow:0 0 0 3px rgba(20,99,255,.15)}
    .field{margin-bottom:12px}

    .btn{appearance:none;border:none;cursor:pointer;background:var(--accent);color:var(--accent-ink);padding:12px 16px;border-radius:12px;font-weight:700;box-shadow:0 8px 22px rgba(20,99,255,.25)}
    .btn.secondary{background:#fff;color:var(--ink);border:1px solid var(--line);box-shadow:none}

    .matches{margin-top:14px;display:none}
    .match{border:1px solid var(--line);border-radius:12px;padding:12px;background:#fbfdff}
    .match + .match{margin-top:8px}
    .pill{display:inline-flex;align-items:center;gap:6px;padding:4px 8px;border-radius:999px;border:1px solid var(--line);background:#fff;font-size:12px;color:var(--ink-dim)}

    .foot{margin-top:14px;font-size:12px;color:var(--ink-dim)}

    /* Autofill highlight */
    .flash{animation:flash .9s ease}
    @keyframes flash{0%{box-shadow:0 0 0 0 rgba(20,99,255,.0)}50%{box-shadow:0 0 0 6px rgba(20,99,255,.25)}100%{box-shadow:0 0 0 0 rgba(20,99,255,.0)}}

    /* Mobile first layout: fields are stacked vertically */
    .grid{display:grid;grid-template-columns:1fr;gap:12px}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden="true">Yoti</div>
        <div>
          <h1>Yoti Onboarding – Registry Cross‑Check (Mock)</h1>
          <div class="subtitle">Frictionless applicant capture with background KYB enrichment via Global Database (simulated)</div>
        </div>
      </div>
    </header>

    <!-- Background status ticker -->
    <div class="topbar" aria-live="polite">
      <strong style="font-size:13px">Background:</strong>
      <div class="ticker" id="ticker"></div>
    </div>

    <!-- Matches appear above the form once enrichment completes -->
    <section class="card matches" id="matches">
      <h2>Possible company matches for applicant</h2>
      <div id="matchList"></div>
    </section>

    <!-- Application form: vertical, mobile-friendly -->
    <main class="card" style="margin-top:12px" aria-labelledby="form-title">
      <h2 id="form-title">Applicant details</h2>
      <form class="grid" onsubmit="return false;">
        <div class="field"><label for="first">First name</label><input id="first" autocomplete="given-name" /></div>
        <div class="field"><label for="last">Last name</label><input id="last" autocomplete="family-name" /></div>
        <div class="field"><label for="email">Email</label><input id="email" type="email" autocomplete="email" /></div>
        <div class="field"><label for="phone">Phone</label><input id="phone" type="tel" autocomplete="tel" /></div>
        <div class="field"><label for="dob">Date of birth</label><input id="dob" type="date" /></div>
        <div class="field"><label for="country">Country</label>
          <select id="country">
            <option value="GB">United Kingdom</option>
            <option value="IE">Ireland</option>
            <option value="FR">France</option>
            <option value="DE">Germany</option>
          </select>
        </div>
        <div class="field"><label for="addr1">Address line 1</label><input id="addr1" autocomplete="address-line1" /></div>
        <div class="field"><label for="addr2">Address line 2 (optional)</label><input id="addr2" autocomplete="address-line2" /></div>
        <div class="field"><label for="city">City</label><input id="city" autocomplete="address-level2" /></div>
        <div class="field"><label for="state">County / State / Region</label><input id="state" autocomplete="address-level1" /></div>
        <div class="field"><label for="post">Postcode</label><input id="post" autocomplete="postal-code" /></div>
        <div class="field"><button id="verifyBtn" class="btn" type="button">Verify now (manual)</button> <button id="resetBtn" class="btn secondary" type="button">Reset</button></div>
      </form>
      <div class="foot">Demo only – static front‑end simulation. In production, these values would be posted to Yoti backend, which calls the Global Database API and returns signed results.</div>
    </main>

    <footer class="foot">© <span id="year"></span> Yoti demo for prospect review. Global Database registry cross‑check simulated. Not affiliated with Yoti.</footer>
  </div>

  <script>
    const $ = (id) => document.getElementById(id);

    // Fictional registry
    const REGISTRY = [
      {
        company:"Riverbank Payments UK Ltd",
        country:"GB",
        status:"Active",
        officers:[
          { name:"Alice Bennett", role:"CFO", dob:"1986-10-05" },
          { name:"Mark Stokes", role:"CEO", dob:"1979-05-22" }
        ],
        shareholders:[
          { name:"Alice Bennett", shares:"15%" },
          { name:"Harbor Ventures LLP", shares:"85%" }
        ]
      },
      {
        company:"Northbridge Identity Ltd",
        country:"GB",
        status:"Active",
        officers:[ { name:"Kamila Hart", role:"Director", dob:"1988-03-14" } ],
        shareholders:[ { name:"Yusuf Patel", shares:"60%" }, { name:"Kamila Hart", shares:"40%" } ]
      }
    ];

    // Demo applicant to auto-type
    const APPLICANT = {
      first:"Alice",
      last:"Bennett",
      email:"alice.bennett@example.com",
      phone:"+44 20 7946 1234",
      dob:"1986-10-05",
      country:"GB",
      addr1:"221B Baker Street",
      addr2:"",
      city:"London",
      state:"Greater London",
      post:"NW1 6XE"
    };

    function setVal(id, val){
      const el = $(id);
      el.value = val;
      el.classList.remove('flash');
      // trigger reflow to restart animation
      void el.offsetWidth;
      el.classList.add('flash');
    }

    function addStep(label, cls){
      const t = $("ticker");
      const s = document.createElement('div');
      s.className = 'step ' + (cls||'');
      const dot = document.createElement('div'); dot.className = 'dot ' + (cls||'');
      const span = document.createElement('span'); span.textContent = label;
      s.appendChild(dot); s.appendChild(span); t.appendChild(s);
      // keep most recent visible
      t.scrollLeft = t.scrollWidth;
      return s;
    }

    function clearTicker(){ $("ticker").innerHTML = ""; }

    function runEnrichment(){
      clearTicker();
      const s1 = addStep('Applicant info received', 'ok');
      // Let this breathe for comprehension
      setTimeout(()=>{
        const s2 = addStep('Running registry enrichment…', 'run');
        // keep this visible for a bit
        setTimeout(()=>{
          s2.classList.remove('run'); s2.classList.add('ok');
          s2.querySelector('.dot').classList.remove('run'); s2.querySelector('.dot').classList.add('ok');
          const s3 = addStep('Response from Global Database received', 'ok');
          // After message lands, auto-complete the rest
          setTimeout(()=>{ autoCompleteFromRegistry(); }, 1200);
        }, 2200);
      }, 900);
    }

    function findMatches()(){
      const full = `${$("first").value}`.trim() + ' ' + `${$("last").value}`.trim();
      const country = $("country").value;
      const matches = [];
      for(const rec of REGISTRY){
        if(rec.country !== country) continue;
        // officer match
        for(const o of rec.officers){
          if(o.name.toLowerCase() === full.toLowerCase()){
            matches.push({company:rec.company,country:rec.country,status:rec.status,matchType:'Officer',person:o.name,role:o.role,dob:o.dob});
          }
        }
        // shareholder match
        for(const sh of rec.shareholders){
          if(sh.name.toLowerCase() === full.toLowerCase()){
            matches.push({company:rec.company,country:rec.country,status:rec.status,matchType:'Shareholder',person:sh.name,shares:sh.shares});
          }
        }
      }
      return matches;
    }

    function renderMatches(list){
      const box = $("matches");
      const tgt = $("matchList");
      tgt.innerHTML = '';
      if(!list.length){ box.style.display='none'; return; }
      for(const m of list){
        const div = document.createElement('div');
        div.className = 'match';
        div.innerHTML = `
          <div style="display:flex;justify-content:space-between;gap:12px;align-items:center;">
            <div>
              <strong>${m.company}</strong>
              <div class="pill" style="margin-top:6px;">Status: ${m.status}</div>
            </div>
            <div class="pill">Match: <strong style="margin-left:4px">${m.matchType}</strong></div>
          </div>
          <div style="margin-top:8px;font-size:13px;color:var(--ink-dim)">Person: <strong style="color:var(--ink)">${m.person}</strong>${m.dob?`, DOB ${m.dob}`:''}${m.role?`, Role ${m.role}`:''}${m.shares?`, Shares ${m.shares}`:''}</div>
        `;
        tgt.appendChild(div);
      }
      box.style.display='block';
    }

    function autoTypeSequence(){
      // Clear fields
      ['first','last','email','phone','dob','country','addr1','addr2','city','state','post'].forEach(id=>{ $(id).value=''; });

      // Slow, readable typewriter for key fields
      typeInto('first', APPLICANT.first, 80)
        .then(()=> waitMs(600))
        .then(()=> typeInto('last', APPLICANT.last, 80))
        .then(()=> waitMs(600))
        .then(()=> { $("country").value = APPLICANT.country; $("country").classList.add('flash'); })
        .then(()=> waitMs(800))
        .then(()=> typeInto('addr1', APPLICANT.addr1, 60))
        .then(()=> waitMs(1000))
        .then(()=> runEnrichment());
    }

    function autoCompleteFromRegistry(){
      // Fill remaining visible fields at a human pace
      setTimeout(()=>{ setVal('email', APPLICANT.email); }, 600);
      setTimeout(()=>{ setVal('phone', APPLICANT.phone); }, 1200);
      setTimeout(()=>{ setVal('dob', APPLICANT.dob); }, 1800);
      setTimeout(()=>{ setVal('addr2', APPLICANT.addr2); }, 2200);
      setTimeout(()=>{ setVal('city', APPLICANT.city); }, 2600);
      setTimeout(()=>{ setVal('state', APPLICANT.state); }, 3000);
      setTimeout(()=>{ setVal('post', APPLICANT.post); }, 3400);

      // Compute matches and show after fields settle
      setTimeout(()=>{ renderMatches(findMatches()); }, 3800);
    }(){
      // Fill remaining visible fields smoothly
      setTimeout(()=>{ setVal('email', APPLICANT.email); }, 200);
      setTimeout(()=>{ setVal('phone', APPLICANT.phone); }, 400);
      setTimeout(()=>{ setVal('dob', APPLICANT.dob); }, 600);
      setTimeout(()=>{ setVal('addr2', APPLICANT.addr2); }, 700);
      setTimeout(()=>{ setVal('city', APPLICANT.city); }, 850);
      setTimeout(()=>{ setVal('state', APPLICANT.state); }, 1000);
      setTimeout(()=>{ setVal('post', APPLICANT.post); }, 1150);

      // Compute matches and show
      setTimeout(()=>{ renderMatches(findMatches()); }, 1200);
    }

    function manualVerify(){
      renderMatches(findMatches());
      runEnrichment();
    }

    function resetForm(){
      ['first','last','email','phone','dob','addr1','addr2','city','state','post'].forEach(id=>$(id).value='');
      $("country").value='GB';
      $("matches").style.display='none';
      clearTicker();
    }

    // Wire up
    $("verifyBtn").addEventListener('click', manualVerify);
    $("resetBtn").addEventListener('click', resetForm);
    $("year").textContent = new Date().getFullYear();

    // Auto-demo on load
    window.addEventListener('load', ()=>{
      autoTypeSequence();
    });
      // helpers for pacing
    function waitMs(ms){ return new Promise(res=>setTimeout(res, ms)); }
    function typeInto(id, text, perChar=60){
      return new Promise(async (res)=>{
        const el = $(id); el.value=''; el.classList.remove('flash'); void el.offsetWidth; el.classList.add('flash');
        for(let i=1;i<=text.length;i++){
          el.value = text.slice(0,i);
          await waitMs(perChar);
        }
        res();
      });
    }
  </script>
</body>
</html>
